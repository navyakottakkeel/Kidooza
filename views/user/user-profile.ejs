<%-include("../../views/partials/user/header") %>


  <div class="container" style="margin-top:180px">
    <div class="row">
    <!-- Left Sidebar -->
    <div class="col-md-3">
      <div class="list-group shadow-sm rounded-4 overflow-hidden" style="border: 1px solid #e0e0e0;">

          <!-- Header -->
          <div class="list-group-item fw-bold text-center py-3" style="background: linear-gradient(135deg, #f5f5f5, #e0e0e0); 
         color: #444; 
         font-size: 1.1rem; 
         letter-spacing: 0.5px;">
              <i class="fas fa-user-circle me-2"></i> My Account
          </div>

          <!-- Links -->
          <a href="/userProfile" class="list-group-item list-group-item-action py-3"
              style="border: none; font-size: 0.95rem;">
              <i class="fas fa-user me-2 text-primary"></i> My Profile
          </a>

          <a href="/address" class="list-group-item list-group-item-action py-3"
              style="border: none; font-size: 0.95rem;">
              <i class="fas fa-map-marker-alt me-2 text-primary"></i> Address
          </a>

          <a href="/orders" class="list-group-item list-group-item-action py-3"
              style="border: none; font-size: 0.95rem;">
              <i class="fas fa-box me-2 text-primary"></i> My Orders
          </a>

          <a href="/wallet" class="list-group-item list-group-item-action py-3"
              style="border: none; font-size: 0.95rem;">
              <i class="fas fa-wallet me-2 text-primary"></i> Wallet
          </a>

          <a href="/profile-change-password" class="list-group-item list-group-item-action py-3"
              style="border: none; font-size: 0.95rem;">
              <i class="fas fa-key me-2 text-primary"></i> Change Password
          </a>

          <a href="/logout" class="list-group-item list-group-item-action text-danger py-3 fw-bold"
              style="border: none; font-size: 0.95rem;">
              <i class="fas fa-sign-out-alt me-2"></i> Logout
          </a>
      </div>
  </div>

      <!-- Right Content -->
      <div class="col-md-9">
        <div class="card shadow-sm rounded-3">
          <div class="card-header d-flex justify-content-between align-items-center"
            style="    background-color: #e4e1d7;">
            <h5 class="mb-0 fw-bold">My Profile</h5>
            <a href="/editProfile" class="btn btn-sm btn-outline-secondary">
              <i class="fas fa-edit"></i>
            </a>
          </div>
          <div class="card-body row">
            <!-- Profile Info -->
            <div class="col-md-8">
              <br>
              <p><strong>Name:</strong>
                <%= user.name %>
              </p><br>
              <p><strong>Email:</strong>
                <%= user.email %>
              </p><br>
              <p><strong>Mobile:</strong>
                <%= user.phone %>
              </p><br>
            </div>

            <!-- Profile Photo Section -->
            <div class="col-md-4 text-center">
              <div class="position-relative d-inline-block">
                <% if (user.profilePhoto) { %>
                  <img src="/uploads/profile/<%= user.profilePhoto %>" class="rounded-circle border" alt="Profile Photo"
                    width="120" height="120">
                  <% } else { %>
                    <img src="profile.webp" class="rounded-circle border" alt="Default Avatar" width="120" height="120">
                    <% } %>


                      <!-- Edit Button -->
                      <label for="profileImageInput"
                        class="position-absolute bottom-0 end-0 bg-light p-1 rounded-circle border"
                        style="cursor:pointer;">
                        <i class="fas fa-edit"></i>
                      </label>

                      <!-- Hidden File Input -->
                      <form id="profileImageForm" action="/userProfile/upload-photo" method="POST"
                        enctype="multipart/form-data">
                        <input type="file" id="profileImageInput" name="profilePhoto" accept="image/*"
                          style="display:none;">
                      </form>
              </div>
            </div>

            <script>
              // Auto submit when an image is selected
              document.getElementById('profileImageInput').addEventListener('change', function () {
                if (this.files.length > 0) {
                  document.getElementById('profileImageForm').submit();
                }
              });
            </script>





          </div>
        </div>
      </div>
    </div>
  </div>



  <%-include("../../views/partials/user/footer") %>